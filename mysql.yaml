---
- hosts: localhost
  connection: local
  become: yes
  become_user: root

  vars_files:
    - /tmp/vars.json

  pre_tasks:
    - name: Add PGP key
      apt_key:
        keyserver: hkp://pgp.mit.edu:80
        id: 5072E1F5
        
    - name: "Add official APT repository"
      apt_repository:
        repo: "deb http://repo.mysql.com/apt/debian/ stretch mysql-5.7"
        state: present
        update_cache: yes

    - name: "Install MySQL Server 5.7"
      apt:
        name:
          - mysql-server-5.7
          - mysql-client
          - libmysqlclient-dev
          - unzip
          - opem-vm-tools
        state: present
        update_cache: yes  
